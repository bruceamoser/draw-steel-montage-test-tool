{{#if hasData}}
<div class="montage-approval">
  <input type="hidden" name="actorId" value="{{actorId}}" />
  <input type="hidden" name="heroName" value="{{heroName}}" />

  {{!-- Hero & Action Info --}}
  <div class="montage-approval-hero">
    <img src="{{heroImg}}" alt="{{heroName}}" class="montage-hero-portrait" />
    <div class="montage-approval-info">
      <h3>{{heroName}}</h3>
      <span class="montage-badge">{{actionTypeLabel}}</span>
    </div>
  </div>

  {{!-- Player Description --}}
  {{#if description}}
  <div class="montage-approval-description">
    <label>{{localize "MONTAGE.Approval.PlayerDescription"}}</label>
    <blockquote>{{description}}</blockquote>
  </div>
  {{/if}}

  {{!-- Ability Name --}}
  {{#if hasAbilityName}}
  <div class="form-group">
    <label>{{localize "MONTAGE.Approval.AbilityName"}}</label>
    <span class="montage-approval-value">{{abilityName}}</span>
  </div>
  {{/if}}

  {{!-- Aid Target --}}
  {{#if aidTargetName}}
  <div class="form-group">
    <label>{{localize "MONTAGE.Approval.AidTarget"}}</label>
    <span class="montage-approval-value">{{aidTargetName}}</span>
  </div>
  {{/if}}

  {{!-- Characteristic & Skill --}}
  {{#if hasCharacteristic}}
  <div class="montage-approval-roll-info">
    <div class="montage-approval-field">
      <span class="montage-approval-field-label">{{localize "MONTAGE.Approval.Characteristic"}}:</span>
      <span class="montage-approval-field-value">{{characteristicDisplay}}</span>
    </div>
    {{#if hasSkill}}
    <div class="montage-approval-field">
      <span class="montage-approval-field-label">{{localize "MONTAGE.Approval.Skill"}}:</span>
      <span class="montage-approval-field-value">{{skillLabel}}</span>
    </div>
    {{/if}}
  </div>
  {{/if}}

  {{!-- Test Difficulty Selector (for rolls and aid) --}}
  {{#if needsDifficulty}}
  <div class="form-group stacked">
    <label for="difficulty">{{localize "MONTAGE.Approval.TestDifficulty"}}</label>
    <select name="difficulty">
      {{#each difficulties}}
      <option value="{{this.value}}" {{#if this.selected}}selected{{/if}}>{{this.label}}</option>
      {{/each}}
    </select>
    <p class="montage-difficulty-hint">
      <strong>Easy:</strong> T1=success w/consequence, T2=success, T3=success w/reward<br/>
      <strong>Medium:</strong> T1=failure, T2=success w/consequence, T3=success<br/>
      <strong>Hard:</strong> T1=failure w/consequence, T2=failure, T3=success
    </p>
  </div>
  {{/if}}

  {{!-- Auto-successes (for abilities) --}}
  {{#if needsAutoSuccesses}}
  <div class="form-group">
    <label for="autoSuccesses">{{localize "MONTAGE.Approval.AutoSuccesses"}}</label>
    <input type="number" name="autoSuccesses" value="1" min="0" max="5" />
    <p class="notes">{{localize "MONTAGE.Approval.AutoSuccessesHint"}}</p>
  </div>
  {{/if}}

  {{!-- GM Notes --}}
  <div class="form-group stacked">
    <label for="gmNotes">{{localize "MONTAGE.Approval.GMNotes"}}</label>
    <textarea name="gmNotes" rows="2" placeholder="{{localize 'MONTAGE.Approval.GMNotesPlaceholder'}}"></textarea>
  </div>

  {{!-- Buttons --}}
  <footer class="montage-approval-footer">
    <button type="button" data-action="approve" class="montage-btn-primary">
      <i class="fa-solid fa-check"></i> {{localize "MONTAGE.Approval.Approve"}}
    </button>
    <button type="button" data-action="reject" class="montage-btn-danger">
      <i class="fa-solid fa-xmark"></i> {{localize "MONTAGE.Approval.Reject"}}
    </button>
  </footer>
</div>

{{else}}
<div class="montage-no-data">
  <p>{{localize "MONTAGE.Approval.NoPending"}}</p>
</div>
{{/if}}
